% !TEX root = main.tex
\section{Unmanned Aerial Vehicle Platooning \label{sec:platooning}}
\subsection{Problem Formulation}
\subsubsection{Vehicle Dynamics}
Consider a UAV whose dynamics are given by
\begin{equation}
\dot{x} = f(x,u)
\end{equation}

\noindent where $x$ represents the state, and $u$ represents the control action. In this paper, we will assume that each vehicle has the following simple model of a quadrotor:

\begin{equation} \label{eq:dyn}
\begin{aligned}
\dot{\pos}_x &= \vel_x \\
\dot{\pos}_y &= \vel_y  \\
\dot{\vel}_x &= u_x \\
\dot{\vel}_y &= u_y \\
|u_x|,|u_y| &\le u_\text{max}
\end{aligned}
\end{equation}

\noindent where the state $x=(\pos_x, \vel_x, \pos_y, \vel_y)\in\mathbb{R}^4$ represents the quadrotor's position in the $x$-direction, its velocity in the $x$-direction, and its position and velocity in the $y$-direction, respectively. The control input $u = (u_x, u_y)\in\mathbb{R}^2$ consists of the acceleration in the $x$- and $y$- directions. For convenience, we will denote the position and velocity $\pos=(\pos_x, \pos_y),\vel=(\vel_x,\vel_y)$, respectively. We will consider a group of $N$ quadrotors $Q_i, i=1\ldots,N$.

In general, the problem of collision avoidance among $N$ vehicles cannot be tractably solved using traditional dynamic programming approaches because the computation complexity of these approaches scales exponentially with the number of vehicles. Thus, in our present work, we will consider the situation where UAVs travel on air highways in platoons, defined in the following sections. The structure imposed by air highways and the platoon enables us to analyze the liveness and safety of the vehicles in a tractable manner.

\subsubsection{Vehicles as Hybrid Systems}
We model each vehicle as a hybrid system \cite{Lygeros98,Lygeros12} consisting of the modes "Free", "Leader", "Follower", and "Faulty". Within each mode, a set of maneuvers is available to allow the vehicle to change modes if desired. The modes and maneuvers are as follows:

\begin{itemize}
\item Free: 

A Free vehicle is not in a platoon or on a highway, and its possible maneuvers or mode transitions are
\begin{itemize}
\item remain a Free vehicle by staying away from highways,
\item become a Leader by entering a highway to create a new platoon, and
\item become a Follower by joining a platoon that is currently on a highway.
\end{itemize} 

\item Leader: 
A Leader vehicle is the vehicle at the front of a platoon (which could consist of only the vehicle itself). The available maneuvers and mode transitions are

\begin{itemize}
\item remain a Leader by traveling along the highway at a pre-specified speed,
\item become a Follower by merging the current platoon with a platoon in front, and
\item become a Free vehicle by leaving the highway.
\end{itemize}

\item Follower: 

A Follower vehicle is a vehicle that is following a platoon leader. The Available maneuvers and mode transitions are 

\begin{itemize}
\item remain a Follower by staying a distance of $b$ behind the vehicle in front in the current platoon,
\item become a Leader by splitting from the current platoon, and
\item become a Free vehicle by leaving the highway.
\end{itemize}

\item Faulty: 

If a vehicle from any of the other modes malfunction, it transitions into the Faulty mode and descends after a duration of $t_\text{internal}$.
\end{itemize}

The available maneuvers and associated mode transitions are summarized in Figure \ref{fig:vehicleModes}.

\begin{figure}
	\centering
	\includegraphics[width=0.5\textwidth]{"fig/vehicleModes"}
	\caption{Hybrid modes for vehicles in platoons.}
	\label{fig:vehicleModes}
\end{figure}

Suppose that there are $N$ vehicles in total. We consider a platoon of vehicles to be a group of $M\le N$ vehicles, denoted $Q_{P_1}, \ldots, Q_{P_M}, \{P_j\}_{j=1}^M \subseteq \{i\}_{i=1}^N$, in a single-file formation. We will assume that the vehicles in a platoon travel along an air highway. The vehicles maintain a separation distance of $b$ with its neighbors inside the platoon. In order to allow for close proximity of the vehicles and the ability to resolve multiple simultaneous safety breaches, we assume that in the event of a malfunction, a vehicle will be able to exit the altitude range of the highway within a duration of $t_\text{internal}=1.5$. Such a requirement may be implemented practically as an emergency landing procedure to which the vehicles revert when a malfunction is detected.

\subsubsection{Objectives}
Given the above modeling assumptions, our goal is to provide control strategies to guarantee the success and safety of all the mode transitions. The theoretical tool used to provide the liveness and safety guarantees is reachability. The reachable sets we compute will allow each vehicle to perform actions such as 

OK SHOULD EVASION BE A MODE?

\begin{itemize}

\item reacting to a malfunctioning vehicle in the platoon,
\item reacting to an intruder vehicle,
\item following the highway, a curve defined in space at constant altitude, at a specified speed, and
\item maintaining a constant relative position and velocity with the leader of a platoon.
\end{itemize}


\begin{enumerate}
\item How do vehicles form platoons?
\item How can the safety of the vehicles be ensured during normal operation and when there is a malfunctioning vehicle within the platoon?
\item How can the platoon respond to intruders such as unresponsive UAVs, birds, or other aerial objects?
\end{enumerate}

The answers to these questions can be broken down into the maneuvers listed in Section \ref{subsec:platoon_def}. In general, the control strategies of each vehicle have a liveness component, which specifies a set of states towards which the vehicle aims to reach, and a safety component, which specifies a set of states that it must avoid. Together, the liveness and safety controllers guarantee the success and safety of a vehicle in the airspace making any desired mode transition. In this paper, these guarantees are provided using reachability analysis.
