% !TEX root = main.tex
\subsection{Safety Analysis}
Under normal operations in a single platoon, each follower quadrotor $Q_i,i=P_2,\ldots,P_{N-1}$ in a platoon checks whether it is in the safety reachable set with respect to $Q_{P_{i-1}}$ and $Q_{P_{i+1}}$. So $\mathcal{Q}(i) = \{P_{i+1}, P_{i-1}\}$ for $i=P_2,\ldots,P_{N-1}$. Assuming there are no nearby quadrotors outside of the platoon, the platoon leader $Q_{P_1}$ checks safety against $Q_{P_2}$, and the platoon trailer $Q_{P_N}$ checks safety against $Q_{P_{N-1}}$. So $\mathcal{Q}(P_1)=\{P_2\}, \mathcal{Q}(P_N)=\{P_{N-1}\}$. When all quadrotors are using liveness controllers to perform their allowed maneuvers, no pair of quadrotors should be in an unsafe configuration if the liveness controllers are well-designed. However, occasionally a quadrotor $Q_k$ may behave unexpectedly due to faults or malfunctions, in which case it may come into an unsafe configuration with another quadrotor.

With our choice of $\mathcal{Q}(i)$ and the assumption that the platoon is in a single-file formation, some quadrotor $Q_i$ would get into an unsafe configuration with $Q_k$, where $Q_k$ is likely to be the quadrotor in front or behind of $Q_i$. In this case, a ``safety breach" occurs. Our synthesis of the safety controller guarantees that between every pair of quadrotors $Q_i,Q_k$, as long as $V_S(-t,x_i- x_k)>0$, $\exists u_i$ to keep $Q_i$ from colliding with $Q_k$ for a desired time horizon $t$, despite the worst case (an adversarial) control from $Q_k$. Therefore, as long as the number of ``safety breaches" is at most one, $Q_i$ can simply use the optimal control to avoid $Q_k$ and avoid collision for the time horizon of $t$. Since quadrotors in platoons are able to exit the current altitude range within a duration of $t_\text{internal}$, if we choose $t=t_\text{internal}$, the safety breach would always end before any collision can occur. 

Within a duration of $t_\text{internal}$, there is a small chance that additional safety breaches may occur. However, as long as the total number of safety breaches does not exceed the number of affected quadrotors, collision avoidance of all the quadrotors can be guaranteed for the duration $t_\text{internal}$. However, as our simulation results show, putting quadrotors in single-file platoons makes the likelihood of multiple safety breaches low during a quadrotor malfunction and during the presence of one intruder vehicle. 

In the event that multiple safety breaches occur for some of the quadrotors due to a malfunctioning quadrotor within the platoon or an intruding quadrotor outside of the platoon, those quadrotors with more than one safety breach still have the option of exiting the highway altitude range in order to avoid collisions. Every extra altitude range reduces the number of simultaneous safety breaches by $1$, so $K$ simultaneous safety breaches can be resolved using $K-1$ different altitude ranges. 

Given that quadrotors within a platoon are safe with respect to each other, each platoon can be treated as a single vehicle, and perform collision avoidance with other platoons. By treating each platoon as a single unit, we reduce the number of individual quadrotors that need to check for safety against each other, reducing overall computation burden.